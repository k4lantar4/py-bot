#!/bin/bash

# ุชูุธู ุฑูฺฏโูุง ุจุฑุง ุฎุฑูุฌ
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
RED='\033[0;31m'
NC='\033[0m' # No Color

echo -e "${YELLOW}===================================================${NC}"
echo -e "${YELLOW}๐ MRJBot - ุฑุงูโุงูุฏุงุฒ ุณุฑูุณโูุง${NC}"
echo -e "${YELLOW}===================================================${NC}"

# ุจุฑุฑุณ ุฏุณุชุฑุณโูุง ูุงูโูุง ุงุฌุฑุง
echo -e "${YELLOW}๐ ุจุฑุฑุณ ุฏุณุชุฑุณโูุง ูุงูโูุง...${NC}"

# ุงุฌุฑุง ุงุณฺฉุฑูพุช ุจุฑุฑุณ ูุงูโูุง
./check_entrypoint.sh

# ุชููู ุณุฑูุณโูุง ูุนู (ุฏุฑ ุตูุฑุช ูุฌูุฏ)
echo -e "${YELLOW}๐ ูุชููู ฺฉุฑุฏู ุณุฑูุณโูุง ูุจู...${NC}"
docker-compose down || true

# ุจุงุฒุณุงุฒ ุชุตุงูุฑ Docker
echo -e "${YELLOW}๐ ุจุงุฒุณุงุฒ ุชุตุงูุฑ Docker...${NC}"
docker-compose build --no-cache

# ุฑุงูโุงูุฏุงุฒ ุณุฑูุณโูุง
echo -e "${YELLOW}๐ ุฑุงูโุงูุฏุงุฒ ุณุฑูุณโูุง...${NC}"
docker-compose up -d

# ุจุฑุฑุณ ูุถุนุช ุณุฑูุณโูุง
echo -e "${YELLOW}๐ ุจุฑุฑุณ ูุถุนุช ุณุฑูุณโูุง...${NC}"
docker-compose ps

echo -e "${GREEN}โ ุฑุงูโุงูุฏุงุฒ ุณุฑูุณโูุง ุจุง ููููุช ุงูุฌุงู ุดุฏ.${NC}"
echo -e "${YELLOW}๐ก ุจุฑุง ูุดุงูุฏู ูุงฺฏโูุงุ ุฏุณุชูุฑ ุฒุฑ ุฑุง ุงุฌุฑุง ฺฉูุฏ:${NC}"
echo -e "   docker-compose logs -f" 