# ๐ง ุฑุงูููุง ุนุจโุงุจ MRJBot

ุฏุฑ ุงู ุฑุงูููุงุ ุฑูุดโูุง ุฑูุน ูุดฺฉูุงุช ุฑุงุฌ ููฺฏุงู ูุตุจ ู ุงุฌุฑุง MRJBot ุชูุถุญ ุฏุงุฏู ุดุฏู ุงุณุช.

## ๐ ููุฑุณุช ูุทุงูุจ

1. [ูุดฺฉูุงุช ุฏุณุชุฑุณ](#ูุดฺฉูุงุช-ุฏุณุชุฑุณ)
2. [ูุดฺฉูุงุช ุงุชุตุงู ุจู ูพุงฺฏุงู ุฏุงุฏู](#ูุดฺฉูุงุช-ุงุชุตุงู-ุจู-ูพุงฺฏุงู-ุฏุงุฏู)
3. [ูุดฺฉูุงุช ุจุงุช ุชูฺฏุฑุงู](#ูุดฺฉูุงุช-ุจุงุช-ุชูฺฏุฑุงู)
4. [ูุดฺฉูุงุช ุจฺฉโุงูุฏ](#ูุดฺฉูุงุช-ุจฺฉ-ุงูุฏ)
5. [ูุดฺฉูุงุช ูุฑุงูุชโุงูุฏ](#ูุดฺฉูุงุช-ูุฑุงูุช-ุงูุฏ)
6. [ูุดฺฉูุงุช Docker](#ูุดฺฉูุงุช-docker)

## ูุดฺฉูุงุช ุฏุณุชุฑุณ

### ุฎุทุง ุฏุณุชุฑุณ ุจู entrypoint.sh

ุงฺฏุฑ ุจุง ุฎุทุง ุฒุฑ ููุงุฌู ุดุฏุฏ:
```
ERROR: for mrjbot_bot Cannot start service bot: failed to create task for container: failed to create shim task: OCI runtime create failed: runc create failed: unable to start container process: error during container init: exec: "/app/entrypoint.sh": permission denied: unknown
```

ุงู ุฎุทุง ุจู ุฏูู ูุฏุงุดุชู ุฏุณุชุฑุณ ุงุฌุฑุง ุฑู ูุงู `entrypoint.sh` ุงุณุช. ุจุฑุง ุญู ุงู ูุดฺฉู:

1. **ุงุณุชูุงุฏู ุงุฒ ุงุณฺฉุฑูพุช ุฑูุน ูุดฺฉู ุฏุณุชุฑุณโูุง**:
   ```bash
   cd /opt/mrjbot
   sudo ./fix_permissions.sh
   ```

2. **ุจุฑูุฒุฑุณุงู Dockerfileโูุง**:
   ```bash
   cd /opt/mrjbot
   sudo ./update_dockerfiles.sh
   ```

3. **ุจุงุฒุณุงุฒ ู ุฑุงูโุงูุฏุงุฒ ูุฌุฏุฏ ุณุฑูุณโูุง**:
   ```bash
   cd /opt/mrjbot
   sudo docker-compose build --no-cache
   sudo docker-compose up -d
   ```

## ูุดฺฉูุงุช ุงุชุตุงู ุจู ูพุงฺฏุงู ุฏุงุฏู

### ุฎุทุง ุงุชุตุงู ุจู PostgreSQL

ุงฺฏุฑ ุจุงุช ุง ุจฺฉโุงูุฏ ููโุชูุงููุฏ ุจู ูพุงฺฏุงู ุฏุงุฏู ูุชุตู ุดููุฏ:

1. **ุจุฑุฑุณ ูุถุนุช ุณุฑูุณ PostgreSQL**:
   ```bash
   sudo docker ps | grep postgres
   ```

2. **ุจุฑุฑุณ ูุงฺฏโูุง PostgreSQL**:
   ```bash
   sudo docker logs mrjbot_postgres
   ```

3. **ุจุฑุฑุณ ุชูุธูุงุช ุงุชุตุงู**:
   - ุจุฑุฑุณ ฺฉูุฏ ฺฉู ูุชุบุฑูุง ูุญุท `DB_HOST`, `DB_PORT`, `DB_NAME`, `DB_USER` ู `DB_PASSWORD` ุฏุฑ `docker-compose.yml` ุจู ุฏุฑุณุช ุชูุธู ุดุฏู ุจุงุดูุฏ.

4. **ุฑุงูโุงูุฏุงุฒ ูุฌุฏุฏ ุณุฑูุณ PostgreSQL**:
   ```bash
   sudo docker-compose restart postgres
   ```

## ูุดฺฉูุงุช ุจุงุช ุชูฺฏุฑุงู

### ุจุงุช ุดุฑูุน ุจู ฺฉุงุฑ ููโฺฉูุฏ

ุงฺฏุฑ ุจุงุช ุชูฺฏุฑุงู ุดุฑูุน ุจู ฺฉุงุฑ ููโฺฉูุฏ:

1. **ุจุฑุฑุณ ูุงฺฏโูุง ุจุงุช**:
   ```bash
   sudo docker logs mrjbot_bot
   ```

2. **ุงุทููุงู ุงุฒ ุชูุธู ุชูฺฉู ุจุงุช ุชูฺฏุฑุงู**:
   - ุจุฑุฑุณ ฺฉูุฏ ฺฉู ูุชุบุฑ ูุญุท `TELEGRAM_BOT_TOKEN` ุฏุฑ `docker-compose.yml` ุง `.env` ุจู ุฏุฑุณุช ุชูุธู ุดุฏู ุจุงุดุฏ.

3. **ุจุฑุฑุณ ุฏุณุชุฑุณ ุจู ุงูุชุฑูุช**:
   ```bash
   sudo docker exec -it mrjbot_bot curl -I https://api.telegram.org
   ```

4. **ุฑุงูโุงูุฏุงุฒ ูุฌุฏุฏ ุจุงุช**:
   ```bash
   sudo mrjbot restart bot
   ```

## ูุดฺฉูุงุช ุจฺฉโุงูุฏ

### ุจฺฉโุงูุฏ ุงุฌุฑุง ููโุดูุฏ ุง ุฎุทุง ูโุฏูุฏ

ุงฺฏุฑ ุจฺฉโุงูุฏ ุงุฌุฑุง ููโุดูุฏ ุง ุฎุทุง ูโุฏูุฏ:

1. **ุจุฑุฑุณ ูุงฺฏโูุง ุจฺฉโุงูุฏ**:
   ```bash
   sudo docker logs mrjbot_backend
   ```

2. **ุจุฑุฑุณ ูุถุนุช ูุงุจุณุชฺฏโูุง**:
   ```bash
   sudo docker exec -it mrjbot_backend pip list
   ```

3. **ุงุฌุฑุง ุฏุณุช ูุงฺฏุฑุดูโูุง**:
   ```bash
   sudo docker exec -it mrjbot_backend python manage.py migrate
   ```

4. **ุฑุงูโุงูุฏุงุฒ ูุฌุฏุฏ ุจฺฉโุงูุฏ**:
   ```bash
   sudo mrjbot restart backend
   ```

## ูุดฺฉูุงุช ูุฑุงูุชโุงูุฏ

### ุตูุญู ูุจ ููุงุด ุฏุงุฏู ููโุดูุฏ

ุงฺฏุฑ ุฑุงุจุท ฺฉุงุฑุจุฑ ูุจ ููุงุด ุฏุงุฏู ููโุดูุฏ:

1. **ุจุฑุฑุณ ูุงฺฏโูุง ูุฑุงูุชโุงูุฏ**:
   ```bash
   sudo docker logs mrjbot_frontend
   ```

2. **ุจุฑุฑุณ ูุถุนุช Nginx**:
   ```bash
   sudo docker logs mrjbot_nginx
   ```

3. **ุฑุงูโุงูุฏุงุฒ ูุฌุฏุฏ ุณุฑูุณโูุง ูุฑุงูุชโุงูุฏ ู Nginx**:
   ```bash
   sudo mrjbot restart frontend nginx
   ```

## ูุดฺฉูุงุช Docker

### ูุดฺฉูุงุช ูุฑุจูุท ุจู Docker

ุงฺฏุฑ ุจุง ูุดฺฉูุงุช Docker ููุงุฌู ุดุฏุฏ:

1. **ุจุฑุฑุณ ูุถุนุช ุณุฑูุณ Docker**:
   ```bash
   sudo systemctl status docker
   ```

2. **ุฑุงูโุงูุฏุงุฒ ูุฌุฏุฏ Docker**:
   ```bash
   sudo systemctl restart docker
   ```

3. **ุจุฑุฑุณ ูุถุง ุฏุณฺฉ**:
   ```bash
   df -h
   ```

4. **ูพุงฺฉุณุงุฒ ฺฉุงูุชูุฑูุง ู ุชุตุงูุฑ ุงุณุชูุงุฏู ูุดุฏู**:
   ```bash
   sudo docker system prune -a
   ```

5. **ุจุฑูุฒุฑุณุงู Docker ู Docker Compose**:
   ```bash
   sudo apt update && sudo apt upgrade docker-ce docker-compose-plugin
   ```

## ๐ ฺฉูฺฉ ุจุดุชุฑ

ุงฺฏุฑ ูุดฺฉู ุดูุง ุจุง ุฑูุดโูุง ุจุงูุง ุญู ูุดุฏุ ูโุชูุงูุฏ:

1. **ุจุฑุฑุณ ฺฉุงูู ูุงฺฏโูุง**:
   ```bash
   sudo mrjbot logs -f
   ```

2. **ุจุฑุฑุณ ูุถุนุช ุณุณุชู**:
   ```bash
   sudo mrjbot status
   ```

3. **ุชูุงุณ ุจุง ูพุดุชุจุงู**:
   - ุงุฒ ุทุฑู ุจุงุช ุชูฺฏุฑุงู ุจู ุขุฏุฑุณ [@MRJSupport_Bot](https://t.me/MRJSupport_Bot) ุจุง ูพุดุชุจุงู ุชูุงุณ ุจฺฏุฑุฏ.
   - ุง ุจู ฺฏุฑูู ูพุดุชุจุงู ุฏุฑ ุชูฺฏุฑุงู ุจู ุขุฏุฑุณ [@MRJSupportGroup](https://t.me/MRJSupportGroup) ูุฑุงุฌุนู ฺฉูุฏ.

4. **ูุตุจ ูุฌุฏุฏ**:
   ุฏุฑ ุตูุฑุช ูุงุฒุ ูโุชูุงูุฏ ุงุฒ ุงุณฺฉุฑูพุช ูุตุจ ูุฌุฏุฏ ุงุณุชูุงุฏู ฺฉูุฏ:
   ```bash
   cd /opt
   sudo rm -rf /opt/mrjbot.bak
   sudo mv /opt/mrjbot /opt/mrjbot.bak
   curl -fsSL https://mrjbot.com/install.sh | sudo bash
   ``` 