# 🚀 سیستم مدیریت V2Ray

## ✨ ویژگی‌های جدید

### 🔄 همگام‌سازی چند سرور
- همگام‌سازی خودکار تنظیمات سرورها
- نظارت بر سلامت سرورها
- انتقال خودکار اشتراک‌ها در صورت بروز مشکل
- ثبت و نمایش آمار عملکرد

### 👥 مدیریت نقش‌ها
- نقش‌های مختلف (مدیر، فروشنده، مشتری VIP، کاربر عادی)
- دسترسی‌های گرانولار
- گروه‌بندی دسترسی‌ها
- مدیریت آسان دسترسی‌ها

### 💰 سیستم فروش
- مدیریت فروشندگان
- محاسبه خودکار کمیسیون
- کیف پول فروشنده
- گزارش‌گیری فروش

### 📊 نظارت پیشرفته
- نمایش وضعیت سرورها
- آمار مصرف منابع
- هشدارهای خودکار
- گزارش‌های عملکرد

## 🛠️ پیش‌نیازها

- Python 3.8+
- PostgreSQL 13+
- Redis 6+
- Docker & Docker Compose

## 📦 نصب

### با استفاده از Docker

1. کلون کردن مخزن:
```bash
git clone https://github.com/yourusername/v2ray-manager.git
cd v2ray-manager
```

2. اجرای برنامه:
```bash
docker-compose up -d
```

3. دسترسی به پنل مدیریت:
- آدرس: `http://your-domain/admin`
- نام کاربری: `admin`
- رمز عبور: `admin123`

## 🔧 تنظیمات

### تنظیمات سرور
1. ورود به پنل مدیریت
2. بخش "مدیریت سرورها"
3. افزودن سرور جدید
4. تنظیم پارامترهای اتصال

### تنظیمات فروشنده
1. ورود به پنل مدیریت
2. بخش "مدیریت کاربران"
3. ایجاد کاربر با نقش فروشنده
4. تنظیم نرخ کمیسیون

## 📱 دسترسی کاربران

### پنل مدیریت
- آدرس: `http://your-domain/admin`
- دسترسی به تمام بخش‌ها
- مدیریت کاربران و سرورها
- مشاهده گزارش‌ها

### پنل فروشنده
- آدرس: `http://your-domain/seller`
- مدیریت مشتریان
- مشاهده فروش و کمیسیون
- گزارش‌گیری

### پنل کاربر
- آدرس: `http://your-domain/dashboard`
- مدیریت اشتراک‌ها
- مشاهده مصرف
- خرید اشتراک جدید

## 🤖 ربات تلگرام

- دستورات اصلی: `/start`, `/help`
- خرید اشتراک: `/buy`
- مشاهده وضعیت: `/status`
- پشتیبانی: `/support`

## 📞 پشتیبانی

- ایمیل: support@example.com
- تلگرام: @v2ray_support
- وبسایت: https://example.com

## 📄 مجوز

این پروژه تحت مجوز MIT منتشر شده است. برای اطلاعات بیشتر به فایل `LICENSE` مراجعه کنید. 

# 🤖 ربات تلگرام MRJ

## 📝 درباره پروژه

ربات تلگرام MRJ یک سیستم مدیریت اشتراک و پرداخت است که با استفاده از Django و React ساخته شده است. این پروژه شامل یک ربات تلگرام، پنل مدیریت وب و API برای مدیریت کاربران، اشتراک‌ها و پرداخت‌ها می‌باشد.

## ✨ ویژگی‌ها

### 🔧 بک‌اند
- احراز هویت و مدیریت کاربران
- مدیریت اشتراک‌ها و پلن‌ها
- سیستم پرداخت و تراکنش‌ها
- سیستم کمیسیون فروشندگان
- سیستم اعلان‌ها
- تنظیمات سیستم
- API RESTful
- مستندات Swagger

### 🤖 ربات تلگرام
- دستورات کاربری
- مدیریت اشتراک
- پرداخت و تراکنش
- کیف پول و موجودی
- اعلان‌ها
- پشتیبانی
- دستورات ادمین
- مدیریت فروشندگان

### 🎨 فرانت‌اند
- پنل مدیریت
- داشبورد کاربری
- داشبورد فروشنده
- مدیریت پروفایل
- تاریخچه تراکنش‌ها
- مدیریت کیف پول
- تنظیمات سیستم
- اعلان‌ها

## 🚀 نصب و راه‌اندازی

### پیش‌نیازها
- Python 3.8+
- Node.js 16+
- PostgreSQL 13+
- Redis 6+
- Docker & Docker Compose

### نصب با Docker

1. کلون کردن مخزن:
```bash
git clone https://github.com/yourusername/mrjbot.git
cd mrjbot
```

2. کپی فایل تنظیمات:
```bash
cp .env.example .env
```

3. ویرایش فایل `.env` با تنظیمات مورد نیاز

4. اجرای پروژه:
```bash
docker-compose up -d
```

### نصب دستی

1. ایجاد محیط مجازی:
```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
venv\Scripts\activate     # Windows
```

2. نصب وابستگی‌ها:
```bash
pip install -r requirements.txt
cd frontend
npm install
```

3. تنظیمات دیتابیس:
```bash
python manage.py migrate
```

4. ایجاد کاربر ادمین:
```bash
python manage.py createsuperuser
```

5. اجرای سرور:
```bash
python manage.py runserver
cd frontend
npm start
```

## 🔧 تنظیمات

### متغیرهای محیطی
- `DEBUG`: حالت اشکال‌زدایی
- `SECRET_KEY`: کلید امنیتی
- `DATABASE_URL`: آدرس دیتابیس
- `REDIS_URL`: آدرس Redis
- `TELEGRAM_BOT_TOKEN`: توکن ربات تلگرام
- `ALLOWED_HOSTS`: میزبان‌های مجاز
- `CORS_ORIGIN_WHITELIST`: لیست سفید CORS

### تنظیمات امنیتی
- JWT احراز هویت
- CORS
- Rate Limiting
- SSL/TLS
- XSS Protection
- CSRF Protection

## 📚 مستندات

### API
- مستندات Swagger: `/swagger/`
- مستندات ReDoc: `/redoc/`
- Schema JSON: `/swagger.json`

### توسعه
- [راهنمای توسعه](docs/development.md)
- [راهنمای API](docs/api.md)
- [راهنمای امنیت](docs/security.md)
- [راهنمای استقرار](docs/deployment.md)

## 🔄 به‌روزرسانی

### به‌روزرسانی خودکار
```bash
./update.sh
```

### پشتیبان‌گیری
```bash
./update.sh backup
```

### بازیابی
```bash
./update.sh restore
```

## 🛠️ ابزارها

### CLI
```bash
mrjbot start      # شروع برنامه
mrjbot stop       # توقف برنامه
mrjbot restart    # راه‌اندازی مجدد
mrjbot logs       # نمایش لاگ‌ها
mrjbot status     # وضعیت برنامه
mrjbot help       # راهنمای دستورات
```

### مدیریت
- [پنل مدیریت](http://localhost:8000/admin/)
- [API](http://localhost:8000/api/)
- [مستندات](http://localhost:8000/docs/)

## 🤝 مشارکت

1. Fork پروژه
2. ایجاد شاخه جدید (`git checkout -b feature/amazing-feature`)
3. Commit تغییرات (`git commit -m 'Add some amazing feature'`)
4. Push به شاخه (`git push origin feature/amazing-feature`)
5. باز کردن Pull Request

## 📄 لایسنس

این پروژه تحت لایسنس MIT منتشر شده است. برای جزئیات بیشتر به فایل [LICENSE](LICENSE) مراجعه کنید.

## 📞 پشتیبانی

- ایمیل: support@example.com
- تلگرام: @mrjbot_support
- وبسایت: https://example.com
- مستندات: https://docs.example.com

## 🙏 قدردانی

- [Django](https://www.djangoproject.com/)
- [React](https://reactjs.org/)
- [Material-UI](https://mui.com/)
- [python-telegram-bot](https://python-telegram-bot.org/)
- [Docker](https://www.docker.com/)
- [PostgreSQL](https://www.postgresql.org/)
- [Redis](https://redis.io/)

# 🤖 ربات تلگرام V2Ray با داشبورد وب

## 🌟 ویژگی‌های اصلی

### 🤖 ربات تلگرام
- مدیریت کامل اکانت‌های V2Ray
- پنل ادمین قدرتمند
- سیستم پرداخت کارت به کارت و زرین‌پال
- سیستم امتیازدهی و پاداش
- چت پشتیبانی زنده
- پیشنهاد هوشمند پلن‌ها
- پشتیبانی چند زبانه (فارسی اول)
- اعلان‌های تلگرام
- مدیریت کارت‌ها با نام صاحب کارت
- گزارش‌های مالی
- پنل فروشنده
- مدیریت سرورها
- پیام‌های گروهی

### 🎨 داشبورد وب
- رابط کاربری مدرن و زیبا
- تم تاریک و آبی تیره
- پشتیبانی از RTL
- پنل ادمین پیشرفته
- مدیریت کاربران
- مدیریت سرورها
- مدیریت کارت‌ها
- سیستم امتیازدهی
- چت پشتیبانی
- گزارش‌های مالی
- مدیریت لایسنس
- آمار و تحلیل

### ⚙️ ویژگی‌های فنی
- اتصال به چندین پنل 3x-UI
- سیستم پرداخت امن
- رمزنگاری داده‌های کارت
- محافظت از رسیدها
- پشتیبان‌گیری خودکار
- مانیتورینگ سرورها
- سیستم لایسنس
- امنیت پیشرفته
- بهینه‌سازی عملکرد
- پشتیبانی از Docker

## 🚀 نصب و راه‌اندازی

### پیش‌نیازها
- سرور Ubuntu 22.04
- Docker و Docker Compose
- دامنه یا IP عمومی
- حداقل 2GB RAM
- 20GB فضای SSD

### نصب
1. کلون کردن ریپوزیتوری:
```bash
git clone https://github.com/yourusername/mrjbot.git
cd mrjbot
```

2. تنظیم متغیرهای محیطی:
```bash
cp .env.example .env
# ویرایش فایل .env با تنظیمات مورد نظر
```

3. راه‌اندازی با Docker:
```bash
docker-compose up -d
```

4. اجرای دستورات اولیه:
```bash
docker-compose exec backend python manage.py migrate
docker-compose exec backend python manage.py createsuperuser
```

5. تنظیم SSL:
```bash
./mrjbot setup-ssl
```

6. تنظیم لایسنس:
```bash
./mrjbot set-license YOUR-LICENSE-KEY
```

## 🛠️ دستورات مدیریتی

### دستورات اصلی
```bash
./mrjbot start          # شروع سرویس‌ها
./mrjbot stop           # توقف سرویس‌ها
./mrjbot restart        # راه‌اندازی مجدد
./mrjbot status         # وضعیت سرویس‌ها
./mrjbot logs           # مشاهده لاگ‌ها
```

### دستورات پشتیبان‌گیری
```bash
./mrjbot backup         # پشتیبان‌گیری
./mrjbot restore        # بازیابی از پشتیبان
./mrjbot list-backups   # لیست پشتیبان‌ها
```

### دستورات مدیریتی
```bash
./mrjbot update         # بروزرسانی سیستم
./mrjbot check-points   # بررسی امتیازات
./mrjbot monitor        # مانیتورینگ سرورها
./mrjbot report         # گزارش‌های مالی
```

## 🔒 امنیت

### ویژگی‌های امنیتی
- رمزنگاری داده‌های حساس
- محافظت در برابر DDoS
- WAF برای محافظت از وب
- IP whitelisting
- احراز هویت دو مرحله‌ای
- رمزنگاری کارت‌ها
- محافظت از رسیدها

### پشتیبان‌گیری
- پشتیبان‌گیری خودکار روزانه
- ذخیره‌سازی ابری
- رمزنگاری پشتیبان‌ها
- بازیابی سریع
- تاریخچه پشتیبان‌ها

## 💰 سیستم پرداخت

### روش‌های پرداخت
- کارت به کارت با نام صاحب کارت
- درگاه زرین‌پال
- کیف پول داخلی
- سیستم امتیازدهی

### ویژگی‌های پرداخت
- تأیید خودکار تراکنش‌ها
- سیستم کمیسیون
- گزارش‌های مالی
- تاریخچه تراکنش‌ها
- مدیریت کارت‌ها

## 🎯 سیستم امتیازدهی

### کسب امتیاز
- خرید اکانت
- معرفی کاربر جدید
- استفاده از سیستم
- فعالیت در چت پشتیبانی

### استفاده از امتیاز
- تخفیف در خرید
- ارتقا به کاربر VIP
- خرید مستقیم
- هدایای ویژه

## 💬 چت پشتیبانی

### ویژگی‌ها
- پشتیبانی زنده
- انتقال به اپراتور
- تاریخچه چت
- ارسال فایل
- پاسخ خودکار

### مدیریت
- پنل اپراتور
- آمار پاسخگویی
- کیفیت سرویس
- گزارش‌های عملکرد

## 📊 گزارش‌ها و آمار

### گزارش‌های مالی
- فروش روزانه/هفتگی/ماهانه
- تراکنش‌های کارت
- کمیسیون‌ها
- سود و زیان

### آمار سیستم
- وضعیت سرورها
- مصرف ترافیک
- تعداد کاربران
- عملکرد سیستم

## 🔄 بروزرسانی

### سیستم بروزرسانی
- بروزرسانی خودکار
- پشتیبان‌گیری قبل از بروزرسانی
- اعلان در تلگرام
- بازیابی در صورت خطا

### دستورات بروزرسانی
```bash
./mrjbot update         # بروزرسانی سیستم
./mrjbot update-check   # بررسی بروزرسانی
./mrjbot rollback       # بازگشت به نسخه قبل
```

## 📱 نسخه‌های آینده

### ویژگی‌های جدید
- پشتیبانی از OpenVPN
- فروش اکانت Apple ID
- فروش PUBG UC
- اپلیکیشن موبایل
- اپلیکیشن دسکتاپ

### بهبودها
- رابط کاربری جدید
- سرعت بیشتر
- امنیت بالاتر
- قابلیت‌های جدید

## 📝 مستندات

### راهنماها
- راهنمای نصب
- راهنمای کاربری
- راهنمای ادمین
- راهنمای توسعه‌دهنده

### آموزش‌ها
- آموزش نصب
- آموزش استفاده
- آموزش مدیریت
- آموزش توسعه

## 🤝 مشارکت

### نحوه مشارکت
- گزارش باگ
- پیشنهاد ویژگی
- ارسال کد
- بهبود مستندات

### قوانین
- کد تمیز
- تست کامل
- مستندات به‌روز
- رعایت استانداردها

## 📄 لایسنس

### انواع لایسنس
- نسخه رایگان
- نسخه حرفه‌ای
- نسخه سازمانی
- نسخه سفارشی

### ویژگی‌های لایسنس
- محدودیت کاربر
- محدودیت سرور
- محدودیت API
- پشتیبانی ویژه

## 📞 پشتیبانی

### روش‌های ارتباطی
- تلگرام
- ایمیل
- تیکت
- چت زنده

### ساعات پاسخگویی
- 24/7 پشتیبانی فنی
- 9 صبح تا 9 شب پشتیبانی عمومی
- پاسخگویی در تعطیلات
- پشتیبانی اضطراری

## 🌟 چت زنده و پشتیبانی آنلاین

سیستم چت زنده با امکانات زیر اضافه شد:

- 💬 گفتگوی آنلاین و بلادرنگ با پشتیبانی
- 📁 امکان ارسال فایل (عکس و PDF)
- ⭐️ سیستم امتیازدهی به گفتگوها
- 👥 مدیریت اپراتورها و وضعیت آنلاین بودن
- 🔄 امکان انتقال گفتگو به اپراتور دیگر
- 📝 نگهداری تاریخچه گفتگوها
- 🎯 اولویت‌بندی درخواست‌های پشتیبانی

### 🎉 ویژگی‌های جدید

- سیستم امتیازدهی برای بهبود کیفیت پشتیبانی
- مدیریت هوشمند صف درخواست‌ها
- پشتیبانی از ارسال فایل و تصویر
- رابط کاربری زیبا و کاربرپسند
- یکپارچه با سیستم نقاط و پاداش
- گزارش‌گیری از عملکرد اپراتورها

### 🚀 بروزرسانی‌های اخیر

- اضافه شدن چت زنده به ربات تلگرام
- بهبود سیستم پرداخت و پیگیری تراکنش‌ها
- اضافه شدن سیستم نقاط و پاداش
- بهینه‌سازی عملکرد و امنیت
- پشتیبانی از چند سرور همزمان

### 📱 دسترسی به چت زنده

کاربران می‌توانند از طریق:
1. ربات تلگرام
2. پنل کاربری وب
3. اپلیکیشن موبایل

به سیستم چت زنده دسترسی داشته باشند.

### 👨‍💼 مدیریت اپراتورها

- تعیین ساعات کاری
- مدیریت تعداد گفتگوهای همزمان
- مشاهده آمار و گزارشات عملکرد
- تنظیم اولویت‌های پاسخگویی

### 📊 گزارش‌گیری

- زمان متوسط پاسخگویی
- میزان رضایت کاربران
- تعداد گفتگوهای موفق
- آمار عملکرد اپراتورها